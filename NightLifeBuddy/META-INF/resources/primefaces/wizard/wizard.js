PrimeFaces.widget.Wizard=PrimeFaces.widget.BaseWidget.extend({init:function(b){this._super(b);this.content=$(this.jqId+"_content");this.backNav=$(this.jqId+"_back");this.nextNav=$(this.jqId+"_next");this.cfg.formId=this.jq.parents("form:first").attr("id");this.currentStep=this.cfg.initialStep;var a=this;if(this.cfg.showStepStatus){this.stepControls=$(this.jqId+" .ui-wizard-step-titles li.ui-wizard-step-title")}if(this.cfg.showNavBar){var c=this.getStepIndex(this.currentStep);PrimeFaces.skinButton(this.backNav);PrimeFaces.skinButton(this.nextNav);this.backNav.click(function(){a.back()});this.nextNav.click(function(){a.next()});if(c==0){this.backNav.hide()}else{if(c==this.cfg.steps.length-1){this.nextNav.hide()}}}},back:function(){if(this.cfg.onback){var b=this.cfg.onback.call(this);if(b==false){return}}var a=this.cfg.steps[this.getStepIndex(this.currentStep)-1];this.loadStep(a,true)},next:function(){if(this.cfg.onnext){var b=this.cfg.onnext.call(this);if(b==false){return}}var a=this.cfg.steps[this.getStepIndex(this.currentStep)+1];this.loadStep(a,false)},loadStep:function(d,c){var a=this;var b={source:this.id,process:this.id,update:this.id,formId:this.cfg.formId,onsuccess:function(k){var g=$(k.documentElement),j=g.find("update");PrimeFaces.ajax.AjaxUtils.handleResponse.call(this,g);a.currentStep=this.args.currentStep;for(var e=0;e<j.length;e++){var m=j.eq(e),l=m.attr("id"),f=m.get(0).childNodes[0].nodeValue;if(l==a.id){a.content.html(f);if(!this.args.validationFailed){var h=a.getStepIndex(a.currentStep);if(a.cfg.showNavBar){if(h==a.cfg.steps.length-1){a.hideNextNav();a.showBackNav()}else{if(h==0){a.hideBackNav();a.showNextNav()}else{a.showBackNav();a.showNextNav()}}}if(a.cfg.showStepStatus){a.stepControls.removeClass("ui-state-highlight");$(a.stepControls.get(h)).addClass("ui-state-highlight")}}}else{PrimeFaces.ajax.AjaxUtils.updateElement.call(this,l,f)}}return true},error:function(){PrimeFaces.error("Error in loading dynamic tab content")}};b.params=[{name:this.id+"_wizardRequest",value:true},{name:this.id+"_stepToGo",value:d}];if(c){b.params.push({name:this.id+"_backRequest",value:true})}PrimeFaces.ajax.AjaxRequest(b)},getStepIndex:function(b){for(var a=0;a<this.cfg.steps.length;a++){if(this.cfg.steps[a]==b){return a}}return -1},showNextNav:function(){this.nextNav.fadeIn()},hideNextNav:function(){this.nextNav.fadeOut()},showBackNav:function(){this.backNav.fadeIn()},hideBackNav:function(){this.backNav.fadeOut()}});