PrimeFaces.widget.Tooltip=PrimeFaces.widget.BaseWidget.extend({init:function(a){this.cfg=a;this.id=this.cfg.id;this.cfg.showEvent=this.cfg.showEvent?this.cfg.showEvent+".tooltip":"mouseover.tooltip";this.cfg.hideEvent=this.cfg.hideEvent?this.cfg.hideEvent+".tooltip":"mouseout.tooltip";this.cfg.showEffect=this.cfg.showEffect?this.cfg.showEffect:"fade";this.cfg.hideEffect=this.cfg.hideEffect?this.cfg.hideEffect:"fade";if(this.cfg.target){this.bindTarget()}else{this.bindGlobal()}this.removeScriptElement(this.id)},refresh:function(a){if(a.target){$(document.body).children(PrimeFaces.escapeClientId(a.id)).remove()}else{$(document.body).children(".ui-tooltip-global").remove()}this._super(a)},bindGlobal:function(){this.jq=$('<div class="ui-tooltip ui-tooltip-global ui-widget ui-widget-content ui-corner-all ui-shadow" />').appendTo("body");this.cfg.globalSelector=this.cfg.globalSelector||"a,:input,:button";var b=this;$(document).off(this.cfg.showEvent+" "+this.cfg.hideEvent,this.cfg.globalSelector).on(this.cfg.showEvent,this.cfg.globalSelector,function(){var c=$(this),e=c.attr("title");if(e){c.data("tooltip",e).removeAttr("title")}if(c.hasClass("ui-state-error")){b.jq.addClass("ui-state-error")}var d=c.data("tooltip");if(d){b.jq.text(d);b.globalTitle=d;b.target=c;b.show()}}).on(this.cfg.hideEvent+".tooltip",this.cfg.globalSelector,function(){if(b.globalTitle){b.jq.hide();b.globalTitle=null;b.target=null;b.jq.removeClass("ui-state-error")}});var a="resize.tooltip";$(window).unbind(a).bind(a,function(){if(b.jq.is(":visible")){b.align()}})},bindTarget:function(){this.id=this.cfg.id;this.jqId=PrimeFaces.escapeClientId(this.id);this.jq=$(this.jqId);this.target=PrimeFaces.Expressions.resolveComponentsAsSelector(this.cfg.target);var b=this;this.target.off(this.cfg.showEvent+" "+this.cfg.hideEvent).on(this.cfg.showEvent,function(){b.show()}).on(this.cfg.hideEvent+".tooltip",function(){b.hide()});this.jq.appendTo(document.body);if($.trim(this.jq.html())==""){this.jq.html(this.target.attr("title"))}this.target.removeAttr("title");var a="resize."+this.id;$(window).unbind(a).bind(a,function(){if(b.jq.is(":visible")){b.align()}})},align:function(){this.jq.css({left:"",top:"","z-index":++PrimeFaces.zindex}).position({my:"left top",at:"right bottom",of:this.target})},show:function(){var a=this;this.timeout=setTimeout(function(){a.align();a.jq.show(a.cfg.showEffect,{},400)},150)},hide:function(){clearTimeout(this.timeout);this.jq.hide(this.cfg.hideEffect,{},400,function(){$(this).css("z-index","")})}});