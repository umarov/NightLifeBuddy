PrimeFaces.widget.Spinner=PrimeFaces.widget.BaseWidget.extend({init:function(a){this._super(a);this.input=this.jq.children(".ui-spinner-input");this.upButton=this.jq.children("a.ui-spinner-up");this.downButton=this.jq.children("a.ui-spinner-down");this.cfg.step=this.cfg.step||1;if(parseInt(this.cfg.step)===0){this.cfg.precision=this.cfg.step.toString().split(/[,]|[.]/)[1].length}this.initValue();this.addARIA();if(this.input.prop("disabled")||this.input.prop("readonly")){return}this.bindEvents();this.input.data(PrimeFaces.CLIENT_ID_DATA,this.id);PrimeFaces.skinInput(this.input)},bindEvents:function(){var a=this;this.jq.children(".ui-spinner-button").on("mouseover.spinner",function(){$(this).addClass("ui-state-hover")}).on("mouseout.spinner",function(){$(this).removeClass("ui-state-hover ui-state-active");if(a.timer){clearInterval(a.timer)}}).on("mouseup.spinner",function(){clearInterval(a.timer);$(this).removeClass("ui-state-active").addClass("ui-state-hover");a.input.trigger("change")}).on("mousedown.spinner",function(d){var c=$(this),b=c.hasClass("ui-spinner-up")?1:-1;c.removeClass("ui-state-hover").addClass("ui-state-active");if(a.input.is(":not(:focus)")){a.input.focus()}a.repeat(null,b);d.preventDefault()});this.input.on("keydown.spinner",function(c){var b=$.ui.keyCode;switch(c.which){case b.UP:a.spin(1);break;case b.DOWN:a.spin(-1);break;default:break}}).on("keyup.spinner",function(){a.updateValue()}).on("blur.spinner",function(){a.format()}).on("focus.spinner",function(){if(a.value!==null){a.input.val(a.value)}}).on("mousewheel.spinner",function(b,c){if(a.input.is(":focus")){if(c>0){a.spin(1)}else{a.spin(-1)}return false}});if(this.cfg.behaviors){PrimeFaces.attachBehaviors(this.input,this.cfg.behaviors)}},repeat:function(a,b){var d=this,c=a||500;clearTimeout(this.timer);this.timer=setTimeout(function(){d.repeat(40,b)},c);this.spin(b)},toFixed:function(c,a){var b=Math.pow(10,a||0);return String(Math.round(c*b)/b)},spin:function(a){var c=this.cfg.step*a,b=this.value?this.value:0,d=null;if(this.cfg.precision){d=parseFloat(this.toFixed(b+c,this.cfg.precision))}else{d=parseInt(b+c)}if(this.cfg.min!==undefined&&d<this.cfg.min){d=this.cfg.min}if(this.cfg.max!==undefined&&d>this.cfg.max){d=this.cfg.max}this.input.val(d);this.value=d;this.input.attr("aria-valuenow",d)},updateValue:function(){var a=this.input.val();if($.trim(a)===""){if(this.cfg.min!==undefined){this.value=this.cfg.min}else{this.value=null}}else{if(this.cfg.precision){a=parseFloat(a)}else{a=parseInt(a)}if(!isNaN(a)){if(this.cfg.max!==undefined&&a>this.cfg.max){a=this.cfg.max}if(this.cfg.min!==undefined&&a<this.cfg.min){a=this.cfg.min}this.value=a}}},initValue:function(){var a=this.input.val();if($.trim(a)===""){if(this.cfg.min!==undefined){this.value=this.cfg.min}else{this.value=null}}else{if(this.cfg.prefix){a=a.split(this.cfg.prefix)[1]}if(this.cfg.suffix){a=a.split(this.cfg.suffix)[0]}if(this.cfg.precision){this.value=parseFloat(a)}else{this.value=parseInt(a)}}},format:function(){if(this.value!==null){var a=this.value;if(this.cfg.prefix){a=this.cfg.prefix+a}if(this.cfg.suffix){a=a+this.cfg.suffix}this.input.val(a)}},addARIA:function(){this.input.attr("role","spinner");this.input.attr("aria-multiline",false);this.input.attr("aria-valuenow",this.value);if(this.cfg.min!==undefined){this.input.attr("aria-valuemin",this.cfg.min)}if(this.cfg.max!==undefined){this.input.attr("aria-valuemax",this.cfg.max)}if(this.input.prop("disabled")){this.input.attr("aria-disabled",true)}if(this.input.prop("readonly")){this.input.attr("aria-readonly",true)}}});